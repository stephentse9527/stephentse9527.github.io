{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"使用arthas快速替换代码","date":"2022-09-15T14:22:17.560Z","updated":"2022-09-15T14:22:17.560Z","comments":true,"path":"api/articles/使用arthas快速替换代码.json","keywords":null,"cover":null,"content":"<h1 id=\"命令-retransform\"><a href=\"#命令-retransform\" class=\"headerlink\" title=\"命令 retransform\"></a>命令 retransform</h1><p>使用命令 <code>retransform</code>可以替换指定的<code>.class</code>文件，做到快速生效更改的代码</p>\n<h5 id=\"操作步骤\"><a href=\"#操作步骤\" class=\"headerlink\" title=\"操作步骤\"></a>操作步骤</h5><ul>\n<li><p>本地编辑好代码后，构建编译代码</p>\n</li>\n<li><p>使用如下命令转换class文件为base64，保存到txt中</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">base64 <span class=\"token operator\">&lt;</span> Test.class <span class=\"token operator\">></span> result.txt<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li><p>到服务器上，新建并编辑<code>result.txt</code>，复制本地的内容，粘贴再保存</p>\n</li>\n<li><p>把服务器上的 <code>result.txt</code>还原为<code>.class</code></p>\n <pre class=\"line-numbers language-none\"><code class=\"language-none\">base64 -d &lt; result.txt &gt; Test.class<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</li>\n<li><p>替换</p>\n <pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">retransform /tmp/MathGame.class<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n</li>\n</ul>\n<h5 id=\"retransform的限制\"><a href=\"#retransform的限制\" class=\"headerlink\" title=\"retransform的限制\"></a>retransform的限制</h5><ul>\n<li><p>不允许新增加field/method</p>\n</li>\n<li><p>正在跑的函数，没有退出不能生效，比如下面新增加的<code>System.out.println</code>，只有<code>run()</code>函数里的会生效</p>\n</li>\n</ul>\n<h5 id=\"查看并清除retransform的影响\"><a href=\"#查看并清除retransform的影响\" class=\"headerlink\" title=\"查看并清除retransform的影响\"></a>查看并清除retransform的影响</h5><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">查看：retransform -l\n删除指定retransform ：retransform -d <span class=\"token number\">1</span>\n删除所有：retransform --deleteAll<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n","feature":null,"text":"命令 retransform使用命令 retransform可以替换指定的.class文件，做到快速生效更改的代码 操作步骤 本地编辑好代码后，构建编译代码 使用如下命令转换class文件为base64，保存到txt中 base64 &lt; Test.class > resul...","link":"","photos":[],"count_time":{"symbolsCount":490,"symbolsTime":"1 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%91%BD%E4%BB%A4-retransform\"><span class=\"toc-text\">命令 retransform</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">操作步骤</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#retransform%E7%9A%84%E9%99%90%E5%88%B6\"><span class=\"toc-text\">retransform的限制</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8B%E5%B9%B6%E6%B8%85%E9%99%A4retransform%E7%9A%84%E5%BD%B1%E5%93%8D\"><span class=\"toc-text\">查看并清除retransform的影响</span></a></li></ol></li></ol></li></ol></li></ol></li></ol>","author":{"name":"谢华客","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"记录一些笔记和心情的地方","socials":{"github":"https://github.com/stephentse9527","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"中文自我介绍","date":"2022-09-15T14:22:17.560Z","updated":"2022-09-15T14:22:17.560Z","comments":true,"path":"api/articles/中文自我介绍.json","keywords":null,"cover":null,"text":"面试官你好，我叫谢华客，21年毕业，有一年多的Java开发经验，目前是在BOSS直聘担任推荐系统工程师，主要负责推荐系统的开发维护和需求迭代，我的主要开发语言是Java，在工作过程中，我积累了对现阶段互联网常用中间件的使用经验，比如SpringBoot、kafka redis e...","link":"","photos":[],"count_time":{"symbolsCount":282,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"谢华客","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"记录一些笔记和心情的地方","socials":{"github":"https://github.com/stephentse9527","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"springboot面试题","date":"2022-09-15T14:22:17.556Z","updated":"2022-09-15T14:22:17.556Z","comments":true,"path":"api/articles/springboot面试题.json","keywords":null,"cover":null,"text":"1、什么是 Spring Boot？ Spring Boot 主要是简化了使用 Spring 的难度，提供了各种启动器、引入JavaConfig来减省了繁重的xml配置，开发者能快速上手，并且内置了web服务，不需要而外启动tomcat服务器 2、为什么要用 Spring Boo...","link":"","photos":[],"count_time":{"symbolsCount":"3.2k","symbolsTime":"3 mins."},"categories":[],"tags":[],"author":{"name":"谢华客","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"记录一些笔记和心情的地方","socials":{"github":"https://github.com/stephentse9527","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}