服务主要情况

机器情况

| 服务名称   | 是否有整体限流 | 单机qps(限流qps) | 服务器数量 | 总体qps上限 | 当前qps | 非缓存qps |
| :--------- | :------------- | :--------------- | :--------- | :---------- | :------ | :-------- |
| dz-rank    | 是             | 单机15           | 28         | 420         | 120     | 120       |
| dz-phoenix | 是             | 单机200          | 12         | 2400        | 600     |           |

架构概览

![image-20220903155016444](项目细节/image-20220903155016444.png)

店长推荐引擎主要分为几个模块，从一次请求的链路流程来说的话，会有AB平台，召回引擎、统一过滤服务、特征平台、排序服务、干预服务、样本采集模块

对于每个请求，首先都会过一遍AB实验平台，根据这个请求的一些信息，userid、所在业务线，来在AB平台的策略池中获取推荐策略，得到推荐策略之后，接下来会进行召回，召回指的是从海量的数据集当中快速圈出来一小部分用户可能感兴趣的数据，而具体的召回策略是通过从上一步的AB实验平台中拿到的配置中去解析属于召回的那一部分，解析出来的配置其实是一组插件，每个插件会表示这个召回从哪个数据源中获取数据，并且它的获取策略，也可以叫做query参数是什么，所以对于



推荐引擎架构

![当前店长推荐系统整体流程图 (1)的副本2](项目细节/当前店长推荐系统整体流程图 (1)的副本2.png)

整体架构

![店长推荐系统服务架构图(召回库_实验中台_trace融合之后)](项目细节/店长推荐系统服务架构图(召回库_实验中台_trace融合之后).png)

![索引数据同步流程 (1)](项目细节/索引数据同步流程 (1).png)

dz es

![image-20220903161354880](项目细节/image-20220903161354880.png)

牛人索引

dz_es

![image-20220903162041163](项目细节/image-20220903162041163.png)

20个分片， 5个主分片，每个分片有三个副本分片

Bz_es

![image-20220903162405892](项目细节/image-20220903162405892.png)

20个分片， 5个主分片，每个分片有三个副本分片



12台机器

